"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4277],{4277:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{PdfWatermarkPreviewer:function(){return d}});var a=i(5893),r=i(7294),s=i(8541),o=i(5197),l=t([s]);s=(l.then?(await l)():l)[0];let c=t=>{switch(t){case"top-left":return{alignItems:"flex-start",justifyContent:"flex-start",padding:"20px"};case"top-right":return{alignItems:"flex-start",justifyContent:"flex-end",padding:"20px"};case"bottom-left":return{alignItems:"flex-end",justifyContent:"flex-start",padding:"20px"};case"bottom-right":return{alignItems:"flex-end",justifyContent:"flex-end",padding:"20px"};default:return{alignItems:"center",justifyContent:"center"}}},d=t=>{let{file:e,pageIndex:i,options:n}=t,l=(0,r.useRef)(null),d=(0,r.useRef)(null),[h,f]=(0,r.useState)(!1),[g,u]=(0,r.useState)({width:0,height:0}),[x,p]=(0,r.useState)(null);(0,r.useLayoutEffect)(()=>{(async()=>{if(!e||!l.current||!d.current)return;f(!1);let t=await e.arrayBuffer(),n=await s.Me({data:t}).promise,a=await n.getPage(i+1),r=a.getViewport({scale:1}),o=d.current,c=Math.min(.9*o.clientWidth/r.width,.9*o.clientHeight/r.height),h=a.getViewport({scale:c}),g=l.current;g.width=h.width,g.height=h.height,u({width:h.width,height:h.height});let x=g.getContext("2d");x&&(await a.render({canvasContext:x,viewport:h}).promise,f(!0))})()},[e,i]),(0,r.useEffect)(()=>{if("image"===n.type&&n.image){let t=URL.createObjectURL(n.image);return p(t),()=>URL.revokeObjectURL(t)}p(null)},[n.image,n.type]);let m={position:"absolute",inset:0,display:"flex",pointerEvents:"none",overflow:"hidden",...c(n.position)},w="text"===n.type?(0,a.jsx)("span",{style:{fontSize:"".concat(n.fontSize,"px"),color:n.color,opacity:n.opacity,transform:"rotate(".concat(n.rotation,"deg)"),fontWeight:"bold",whiteSpace:"nowrap"},children:n.text}):x?(0,a.jsx)("img",{src:x,alt:"Watermark Preview",style:{opacity:n.opacity,transform:"rotate(".concat(n.rotation,"deg)"),maxWidth:"50%",maxHeight:"50%",objectFit:"contain"}}):null,y="tiled"===n.positioning&&"text"===n.type?'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="150px" width="150px"><text x="75" y="75" fill="'.concat(n.color,'" opacity="').concat(n.opacity,'" font-size="').concat(n.fontSize,'" text-anchor="middle" dominant-baseline="middle" transform="rotate(').concat(n.rotation,', 75, 75)">').concat(n.text,"</text></svg>')"):void 0;return(0,a.jsx)("div",{ref:d,className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative shadow-xl bg-white",style:{width:g.width,height:g.height},children:[!h&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-20",children:(0,a.jsx)(o.Z,{className:"h-12 w-12 animate-spin text-gray-500"})}),(0,a.jsx)("canvas",{ref:l}),h&&(0,a.jsx)("div",{style:{...m,backgroundImage:y},children:"single"===n.positioning&&w})]})})};n()}catch(t){n(t)}})}}]);
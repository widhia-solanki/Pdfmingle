"use strict";exports.id=277,exports.ids=[277],exports.modules={7413:(t,e,i)=>{i.a(t,async(t,a)=>{try{i.r(e),i.d(e,{PdfWatermarkPreviewer:()=>c});var n=i(997),r=i(6689),s=i(121),o=i(5197),l=t([s]);s=(l.then?(await l)():l)[0];let d=t=>{switch(t){case"top-left":return{alignItems:"flex-start",justifyContent:"flex-start",padding:"20px"};case"top-right":return{alignItems:"flex-start",justifyContent:"flex-end",padding:"20px"};case"bottom-left":return{alignItems:"flex-end",justifyContent:"flex-start",padding:"20px"};case"bottom-right":return{alignItems:"flex-end",justifyContent:"flex-end",padding:"20px"};default:return{alignItems:"center",justifyContent:"center"}}},c=({file:t,pageIndex:e,options:i})=>{let a=(0,r.useRef)(null),l=(0,r.useRef)(null),[c,g]=(0,r.useState)(!1),[h,f]=(0,r.useState)({width:0,height:0}),[x,u]=(0,r.useState)(null);(0,r.useLayoutEffect)(()=>{(async()=>{if(!t||!a.current||!l.current)return;g(!1);let i=await t.arrayBuffer(),n=await s.getDocument({data:i}).promise,r=await n.getPage(e+1),o=r.getViewport({scale:1}),d=l.current,c=Math.min(.9*d.clientWidth/o.width,.9*d.clientHeight/o.height),h=r.getViewport({scale:c}),x=a.current;x.width=h.width,x.height=h.height,f({width:h.width,height:h.height});let u=x.getContext("2d");u&&(await r.render({canvasContext:u,viewport:h}).promise,g(!0))})()},[t,e]),(0,r.useEffect)(()=>{if("image"===i.type&&i.image){let t=URL.createObjectURL(i.image);return u(t),()=>URL.revokeObjectURL(t)}u(null)},[i.image,i.type]);let p={position:"absolute",inset:0,display:"flex",pointerEvents:"none",overflow:"hidden",...d(i.position)},m="text"===i.type?n.jsx("span",{style:{fontSize:`${i.fontSize}px`,color:i.color,opacity:i.opacity,transform:`rotate(${i.rotation}deg)`,fontWeight:"bold",whiteSpace:"nowrap"},children:i.text}):x?n.jsx("img",{src:x,alt:"Watermark Preview",style:{opacity:i.opacity,transform:`rotate(${i.rotation}deg)`,maxWidth:"50%",maxHeight:"50%",objectFit:"contain"}}):null,w="tiled"===i.positioning&&"text"===i.type?`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="150px" width="150px"><text x="75" y="75" fill="${i.color}" opacity="${i.opacity}" font-size="${i.fontSize}" text-anchor="middle" dominant-baseline="middle" transform="rotate(${i.rotation}, 75, 75)">${i.text}</text></svg>')`:void 0;return n.jsx("div",{ref:l,className:"w-full h-full flex items-center justify-center",children:(0,n.jsxs)("div",{className:"relative shadow-xl bg-white",style:{width:h.width,height:h.height},children:[!c&&n.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-20",children:n.jsx(o.Z,{className:"h-12 w-12 animate-spin text-gray-500"})}),n.jsx("canvas",{ref:a}),c&&n.jsx("div",{style:{...p,backgroundImage:w},children:"single"===i.positioning&&m})]})})};a()}catch(t){a(t)}})}};